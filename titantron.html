<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,height=device-height,initial-scale=1">
  <style>
    html,body{margin:0;height:100%;background:#000;overflow:hidden}
    iframe{position:absolute;inset:0;width:100%;height:100%;border:0}
    #tap{
      position:absolute;inset:0;display:flex;align-items:center;justify-content:center;
      font:700 28px/1.2 sans-serif;color:#fff;text-shadow:0 2px 6px rgba(0,0,0,.7);
      background:rgba(0,0,0,.25);cursor:pointer;user-select:none;
    }
    #tap.hidden{display:none}
  </style>
</head>
<body>
  <iframe id="p" allow="autoplay; encrypted-media" allowfullscreen></iframe>
  <div id="tap">CLICK TO ENABLE SOUND</div>

  <script>
    const u = new URL(location.href);
    const id = u.searchParams.get("v");
    const origin = location.origin;

    function srcFor(mute){
      return "https://www.youtube-nocookie.com/embed/" + id +
        "?autoplay=1" +
        "&mute=" + (mute ? "1" : "0") +
        "&controls=0&rel=0&playsinline=1" +
        "&iv_load_policy=3&modestbranding=1" +
        "&loop=1&playlist=" + id +
        "&origin=" + encodeURIComponent(origin);
    }

    if (id) {
      // Start muted so autoplay is reliable
      document.getElementById("p").src = srcFor(true);
    }

    // One user gesture -> reload unmuted (YouTube policy)
    document.getElementById("tap").addEventListener("click", () => {
      document.getElementById("tap").classList.add("hidden");
      document.getElementById("p").src = srcFor(false);
    }, { once:true });
  </script>
</body>
</html>
