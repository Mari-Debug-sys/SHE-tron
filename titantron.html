<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,height=device-height,initial-scale=1">
<title>SHE Tron</title>

<style>
html,body{
  margin:0;
  width:100%;
  height:100%;
  background:#000;
  overflow:hidden;
}

/* root */
#frame{
  position:fixed;
  inset:0;
  background:#000;
}

/* VIDEO AREA */
#playerWrap{
  position:absolute;
  inset:0;
  overflow:hidden; /* this is critical â€” it lets us crop the empty YT canvas */
  background:#000;
}

/*
  THE FIX:
  We intentionally make the YouTube player wider than the screen
  and center it. The unused cinematic canvas gets cropped, not
  your actual video artwork.
*/
#playerWrap iframe{
  position:absolute !important;
  top:50% !important;
  left:50% !important;
  transform:translate(-50%,-50%);

  /* 16:9 -> overscan width */
  width:177.78% !important;
  height:100% !important;

  border:0 !important;
  display:block !important;
}

/* IDLE IMAGE */
#idle{
  position:absolute;
  inset:0;
  display:flex;
  align-items:center;
  justify-content:center;
  background:#000;
}

#idle img{
  max-width:100%;
  max-height:100%;
  width:auto;
  height:auto;
  object-fit:contain;
}
</style>
</head>

<body>

<div id="frame">
  <div id="playerWrap">
    <iframe id="player"
      allow="autoplay; encrypted-media; fullscreen"
      allowfullscreen></iframe>
  </div>

  <div id="idle">
    <img id="idleImg" alt="SHE Idle">
  </div>
</div>

<script>
const qs=new URLSearchParams(location.search);
const v=qs.get("v");

function baseDir(){
  return location.origin+location.pathname.replace(/[^\/]*$/,"");
}

const idleImg=document.getElementById("idleImg");
idleImg.src=baseDir()+"idle.png?cb="+Date.now();

function extractId(input){
  if(!input) return "";
  let s=input.trim();
  let m=s.match(/[?&]v=([^&]+)/); if(m) return m[1];
  m=s.match(/youtu\.be\/([^?&]+)/); if(m) return m[1];
  return s;
}

const f=document.getElementById("player");

function showIdle(){
  f.src="about:blank";
  document.getElementById("playerWrap").style.display="none";
  document.getElementById("idle").style.display="flex";
}

function showVideo(id){
  document.getElementById("idle").style.display="none";
  document.getElementById("playerWrap").style.display="block";

  const origin=location.origin;

  f.src=
  "https://www.youtube-nocookie.com/embed/"+id+
  "?autoplay=1"+
  "&controls=0"+
  "&rel=0"+
  "&playsinline=1"+
  "&iv_load_policy=3"+
  "&modestbranding=1"+
  "&loop=1&playlist="+id+
  "&vq=hd1080"+
  "&mute=0"+
  "&origin="+encodeURIComponent(origin);
}

if(!v) showIdle();
else showVideo(extractId(v));
</script>

</body>
</html>
